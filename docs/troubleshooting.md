# Troubleshooting / Типовые проблемы

## 1) На устройстве не работает `localhost`
Симптом:
- Авторизация/лидерборд падают с ошибкой сети.

Причина:
- На телефоне `localhost` указывает на сам телефон, а не на ваш компьютер.

Решение:
- Укажите IP компьютера в `EXPO_PUBLIC_API_BASE_URL`, например `http://192.168.0.10:5000/api`.

## 2) Ошибка 401 "Authentication required" или "Invalid or expired token"
Причина:
- Отсутствует/неверный `Authorization: Bearer ...`.
- Токен истёк (см. `TOKEN_MAX_AGE`).

Решение:
- Повторите логин/регистрацию.
- Убедитесь, что `API_SECRET_KEY` не меняется между перезапусками (в противном случае старые токены станут невалидными).

## 3) CORS ошибки в браузере
В backend включён CORS для `/api/*` с `origins: *` (см. `server/app.py`).
Если меняете CORS-политику, убедитесь, что клиентский домен/порт разрешён.

## 4) Порт backend не совпадает с клиентом
Симптом:
- Клиент обращается не туда.

Факт из кода:
- Клиент по умолчанию использует `http://localhost:5000/api` (см. `services/api.ts`).

Решение:
- Запустите Flask на `--port 5000`, либо задайте `EXPO_PUBLIC_API_BASE_URL`.

## 5) Expo Go и функции, требующие dev build
Некоторые возможности (например, часть нативных интеграций) могут быть ограничены в Expo Go.
См. `TEST_PLAN.md` для заметок по dev build.
